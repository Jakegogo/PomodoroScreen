# PomodoroScreen v1.0.1 更新日志

## 🎯 版本信息
- **版本号**: v1.0.1
- **发布日期**: 2025年9月23日
- **类型**: Bug修复和功能优化

## 🚀 新功能

### 📹 新手引导视频化
- **视频引导**: 新手引导第一步现在使用动态视频展示，替代静态图标
- **循环播放**: 引导视频自动循环播放，提供更生动的用户体验
- **智能切换**: 步骤切换时自动管理视频播放和停止

### 🎨 健康环呼吸动画优化
- **第二层强化**: 工作强度环的呼吸动画强度提升约20%
- **视觉平衡**: 保持三层健康环之间的层次感和视觉和谐
- **动画流畅**: 优化呼吸效果的自然过渡

### 🖼️ 背景预览功能增强
- **预览按钮**: 背景设置面板新增预览功能
- **样式统一**: 预览按钮采用与取消按钮相同的设计风格
- **智能预览**: 支持选中文件预览和轮播预览两种模式

## 🐛 问题修复

### ⌨️ 键盘交互修复
- **ESC键恢复**: 修复背景预览模式下ESC键无法退出的问题
- **键盘响应**: 恢复遮罩层的键盘事件处理机制
- **双重退出**: 支持ESC键和关闭按钮两种退出方式

### 🔧 技术优化
- **视频资源**: 优化视频文件路径解析逻辑
- **内存管理**: 改进视频播放器的生命周期管理
- **事件处理**: 完善键盘事件的精确检测机制

## 📋 详细变更

### 用户界面
- 新手引导第一步集成 `icon_video.mp4` 视频播放
- 健康环第二层呼吸强度从 0.166 提升至 0.199
- 背景预览按钮采用透明背景和白色边框设计

### 技术实现
- 集成 AVFoundation 框架支持视频播放
- 实现 AVPlayer 和 AVPlayerLayer 的完整生命周期管理
- 添加视频循环播放和资源清理机制
- 恢复 OverlayView 的 keyDown 事件处理（键码53 = ESC键）

### 代码质量
- 添加详细的调试日志用于问题排查
- 优化视频容器的可视化调试功能
- 改进错误处理和资源管理

## 🎉 用户体验提升

- **更生动的引导**: 视频化引导让新用户更快理解应用功能
- **更强的视觉效果**: 优化的健康环动画提供更好的视觉反馈
- **更便捷的预览**: 一键预览背景设置，支持ESC快速退出
- **更稳定的交互**: 修复键盘快捷键，提升操作流畅性

## 🔄 兼容性
- 保持与 macOS 14.0+ 的完全兼容
- 支持 Apple Silicon 和 Intel 处理器
- 所有现有功能和设置保持不变

---

**下载地址**: [GitHub Releases](https://github.com/your-repo/PomodoroScreen/releases/tag/v1.0.1)

**反馈渠道**: 如遇问题或建议，请通过 GitHub Issues 反馈
