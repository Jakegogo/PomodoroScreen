# PomodoroScreen - 番茄钟计时器

一款简洁而高效的 macOS 番茄钟计时应用，旨在提升工作效率的同时，提醒用户定期休息，关注身体健康。

## 功能特点

### 🍅 状态栏显示
- 在 macOS 状态栏显示剩余时间
- 番茄钟图标 + 倒计时显示
- 右键菜单控制：开始/停止/重置/退出

### ⏰ 计时功能
- 默认25分钟番茄钟计时
- 精确到秒的倒计时显示
- 自动计时完成检测

### 🔒 全屏遮罩
当计时结束时，应用会显示一个全屏半透明遮罩层：
- **半透明效果**：可以看到底下的桌面内容，透明度30%
- 覆盖整个屏幕，无法被绕过
- 防止切换到其他应用程序
- 防止切换桌面空间
- 无法最小化或关闭
- **取消按钮**：提供"取消休息"按钮，可手动结束休息
- **自动恢复**：3分钟后自动隐藏，恢复正常工作

## 如何使用

### 构建应用
1. 在 Xcode 中打开 `PomodoroScreen.xcodeproj`
2. 选择目标设备为 "My Mac"
3. 点击运行按钮或按 `Cmd+R`

### 使用应用
1. 应用启动后会在状态栏显示 🍅 25:00
2. 右键点击状态栏图标打开菜单
3. 选择"开始"启动番茄钟计时
4. 计时结束后会显示全屏半透明遮罩提醒
5. **休息选择**：
   - 点击"取消休息"按钮立即结束休息
   - 或等待3分钟自动恢复
6. 遮罩层期间可以看到桌面内容，但无法操作其他应用

### 测试功能
- **立即完成（测试）**: 右键菜单中的测试选项，可以立即触发遮罩层显示，无需等待25分钟
- 用于快速验证遮罩层功能是否正常工作

## 技术实现

### 核心组件
- `PomodoroTimer`: 计时器核心逻辑
- `StatusBarController`: 状态栏控制和菜单
- `OverlayWindow`: 全屏遮罩窗口实现
- `AppDelegate`: 应用程序生命周期管理

### 关键特性
- **LSUIElement**: 应用不在 Dock 中显示，只在状态栏运行
- **NSWindow.Level.screenSaver**: 确保遮罩窗口在最高层级
- **collectionBehavior**: 遮罩窗口覆盖所有桌面空间
- **防切换机制**: 监听应用程序焦点变化，强制保持前台

## 系统要求

- macOS 14.0 或更高版本
- Xcode 15.0 或更高版本（用于构建）

## 注意事项

⚠️ **重要提醒**: 
- 遮罩层激活时会阻止所有其他应用程序的使用
- 确保在重要工作前测试应用行为
- 如遇问题，可通过 Activity Monitor 强制退出应用

## 许可证

此项目仅供学习和个人使用。
