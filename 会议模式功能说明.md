# 🔇 专注模式功能说明

## 功能概述

专注模式是 PomodoroScreen v1.0.1 新增的专业功能，专为会议、演示等需要静默休息的场景设计。

## 主要特性

### 1. 静默休息
- **无遮罩层**: 休息时不显示全屏遮罩，避免干扰会议进行
- **无弹窗提示**: 不显示右上角的休息提醒tooltip，保持界面简洁

### 2. 状态栏提示
- **休息标识**: 休息期间在状态栏显示"休息时间"文字
- **自动清除**: 休息结束后自动移除提示文字，恢复正常倒计时显示

### 3. 便捷开关
- **弹窗控制**: 在状态栏弹窗的最底部提供专注模式开关
- **直观布局**: 文字标签在左侧，iOS风格开关在右侧
- **即时生效**: 开关状态立即保存并应用
- **持久化**: 设置自动保存到系统偏好设置
- **易于访问**: 开关位于弹窗底部，方便快速切换

## 使用方法

### 开启专注模式
1. 点击状态栏中的番茄钟图标
2. 在弹出的控制面板最底部找到"专注模式"开关
3. 点击开关启用专注模式

### 专注模式下的体验
1. **工作阶段**: 与普通模式相同，正常倒计时
2. **休息开始**: 
   - 不显示全屏休息遮罩
   - 状态栏显示"休息时间"文字提示
   - 工具提示变为"专注模式：静默休息中"
3. **休息结束**: 自动恢复正常倒计时显示

### 关闭专注模式
1. 再次点击状态栏番茄钟图标
2. 在弹窗底部关闭"专注模式"开关
3. 下次休息时将恢复正常的遮罩层显示

## 技术实现

### 核心逻辑
- **静默判断**: 在 `AppDelegate.showOverlay()` 中检查专注模式状态
- **状态栏更新**: 通过 `StatusBarController` 管理休息时间提示
- **设置持久化**: 使用 `UserDefaults` 保存专注模式状态

### 关键文件修改
- `PomodoroTimer.swift`: 添加专注模式状态管理
- `StatusBarPopupWindow.swift`: 添加专注模式开关UI
- `StatusBarController.swift`: 添加状态栏休息提示逻辑
- `AppDelegate.swift`: 添加静默休息逻辑

## 使用场景

### 适用场景
- 📹 **在线会议**: 避免休息遮罩干扰视频会议
- 📊 **演示汇报**: 演示过程中的静默休息
- 🏢 **办公协作**: 与同事协作时的低调休息
- 🎯 **专注工作**: 需要保持屏幕可见的工作场景

### 不适用场景
- 🏠 **个人使用**: 建议使用正常模式获得更好的休息体验
- 💪 **强制休息**: 需要强制离开屏幕时应关闭专注模式

## 注意事项

1. **休息效果**: 专注模式下用户需要自觉休息，缺少强制提醒
2. **设置保存**: 专注模式状态会自动保存，重启应用后保持之前的设置
3. **兼容性**: 与其他所有功能（自动重启、熬夜限制等）完全兼容
4. **性能影响**: 几乎无性能影响，仅增加一个布尔值判断

## 更新日志

- **v1.0.1**: 首次引入专注模式功能
- **功能状态**: ✅ 已完成并测试通过

---

*专注模式让 PomodoroScreen 在专业场合下更加实用，在保持番茄工作法节奏的同时不干扰重要的会议和协作。*
